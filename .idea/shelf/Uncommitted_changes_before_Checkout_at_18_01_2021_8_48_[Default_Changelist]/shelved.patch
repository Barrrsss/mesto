Index: src/pages/index.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>//импорты\r\nimport './index.css'\r\nimport {validationConfig, options} from '../utils/constants.js';\r\nimport {initialCards} from '../utils/cardsdata.js';\r\nimport Card from '../components/Card.js';\r\nimport FormValidator from '../components/FormValidator.js';\r\nimport Section from '../components/Section.js';\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithConfirm from '../components/PopupWithForm.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\nimport Api from '../components/Api.js';\r\n\r\n//поля edit\r\nexport const nameOutput = document.querySelector('.profile__name');\r\nexport const titleOutput =  document.querySelector('.profile__title');\r\nexport const avatarOutput =  document.querySelector('.profile__image');\r\n\r\n//кнопки открытия попапов\r\nexport const openEditButton = document.querySelector('.profile__edit');\r\nexport const openAddButton = document.querySelector('.profile__add');\r\nexport const updateAvatarButton = document.querySelector('.profile__image');\r\n\r\n//переменные полей ввода редактирования профиля\r\nexport const popupNameField = document.querySelector('.popup__field_name');\r\nexport const popupTitleField = document.querySelector('.popup__field_title');\r\n\r\n//переменные полей ввода добавления карточки\r\nexport const popupPlaceField = document.querySelector('.popup__field_place');\r\nexport const popupSourceField = document.querySelector('.popup__field_source');\r\n//форма профиля и добавления карточки\r\nexport const editProfileForm = document.querySelector('.popup__fields_edit-profile');\r\nexport const addCardForm = document.querySelector('.popup__fields_add-card');\r\n//список карточек\r\nexport const cardContainer = document.querySelector('.elements__list');\r\n//лайки карточек\r\n\r\nconst api = new Api(options);\r\n\r\n\r\n//отрисовка карточек из массива и создание новой\r\nupdateAvatarButton.addEventListener(\"mouseover\", function(  ){\r\n document.querySelector('.profile__image_hover').style.display = 'block';\r\n});\r\nupdateAvatarButton.addEventListener(\"mouseout\", function(  ){\r\n document.querySelector('.profile__image_hover').style.display = 'none';\r\n});\r\n\r\n\r\napi.getAllData()\r\n  .then((result) => {\r\n    const [userData, cardsData] = result;\r\n    console.log(result);\r\n    const profileData = new UserInfo({name: nameOutput, about: titleOutput, avatar: avatarOutput});\r\n    profileData.setUserInfo(userData);\r\n\r\n    const editProfilePopup = new PopupWithForm('.popup_edit-profile', { submitHandler: (userData) => {\r\n      api.saveEditedInfo(userData)\r\n        .then((userData) => {\r\n          profileData.setUserInfo(userData);\r\n          editProfilePopup.close();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          renderLoading(false, editForm, 'Сохранить');\r\n        });\r\n\r\n    }});\r\n\r\n    openEditButton.addEventListener('click', () => {\r\n        editProfilePopup.open();\r\n        const profile = profileData.getUserInfo();\r\n        popupNameField.value = nameOutput.textContent;\r\n        popupTitleField.value = titleOutput.textContent;\r\n        editProfileValid.resetValidationState();\r\n    });\r\n\r\n    editProfilePopup.setEventListeners();\r\n\r\n    const addCardPopup = new PopupWithForm('.popup_add-card', { submitHandler: (item) => {\r\n      api.addNewCard(item)\r\n          .then((data) => {\r\n              cardRender(data);\r\n              addCardPopup.close();\r\n          })\r\n          .catch((err) => {\r\n              console.log(err);\r\n          })\r\n          .finally(() => {\r\n\r\n          });\r\n      }\r\n    });\r\n    openAddButton.addEventListener('click', () => {\r\n        addCardPopup.open();\r\n        addCardValid.resetValidationState();\r\n    });\r\n\r\n    addCardPopup.setEventListeners();\r\n    \r\n    //фулл картинки в карточке\r\n    const showCardPopup = new PopupWithImage('.popup_image');\r\n\r\n    showCardPopup.setEventListeners();\r\n\r\n    const userId = userData._id;\r\n    console.log(userData._id);\r\n\r\n\r\n    const cardRender = (item, isArray) => {\r\n        const card = new Card({ data: item, openPopup: () => {\r\n          showCardPopup.open(item);\r\n          ownerLikes();\r\n        },\r\n\r\n        putLikeHandler: () => {\r\n            api.putLike(item._id)\r\n                .then((item) => {\r\n                  likeCounter.textContent = item.likes.length;\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        deleteLikeHandler: () => {\r\n            api.deleteLike(item._id)\r\n                .then((item) => {\r\n                    likeCounter.textContent = item.likes.length;\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        deleteCardHandler: () => {\r\n            const deleteCardPopup = new PopupWithConfirm(\".popup_confirm\", {\r\n                submitHandler: () => {\r\n\r\n                    api.deleteCard(item._id)\r\n                        .then(() => {\r\n                            cardElement.remove();\r\n                            deleteCardPopup.close();\r\n                        })\r\n                        .catch((err) => {\r\n                            console.log(err);\r\n                        })\r\n                        .finally(() => {\r\n\r\n                        });\r\n                },\r\n            });\r\n            deleteCardPopup.open(item);\r\n            deleteCardPopup.setEventListeners();\r\n        },\r\n      }, '#card', userId);\r\n\r\n      const cardElement = card.createCard(item.owner._id);\r\n      const likeCounter = cardElement.querySelector('.element__like-counter');\r\n        cardList.addItem(cardElement, isArray);\r\n    };\r\n\r\n    const cardList = new Section({ items: cardsData, renderer: (item) => {\r\n            cardRender(item);\r\n     }\r\n    }, cardContainer);\r\n\r\n    cardList.renderItems();\r\n    })\r\n  .catch((err) => {\r\n    console.log(err); // выведем ошибку в консоль\r\n  });\r\n\r\n\r\n\r\n// удаление\r\n// fetch('https://mesto.nomoreparties.co/v1/cohort-19/cards/5ffb31a930cbab0274373867', {\r\n//   method: 'DELETE',\r\n//   headers: {\r\n//     authorization: '34fdcd7c-5eb8-4424-b9a2-100499773e16',\r\n//     'Content-Type': 'application/json'\r\n//   },\r\n//\r\n// });\r\n\r\n// подключение валидации\r\nconst addCardValid = new FormValidator(validationConfig, addCardForm);\r\nconst editProfileValid = new FormValidator(validationConfig, editProfileForm);\r\n\r\naddCardValid.enableValidation();\r\neditProfileValid.enableValidation();\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/pages/index.js	(revision 6abfd888a4788e84c6fa648cc6f70ada56356230)
+++ src/pages/index.js	(date 1610693818544)
@@ -45,7 +45,15 @@
 updateAvatarButton.addEventListener("mouseout", function(  ){
  document.querySelector('.profile__image_hover').style.display = 'none';
 });
+const button = document.querySelector('.popup__button');
+function Loading(a, b) {
+  if(true) {
+    button.textContent = b;
+  } else if (false) {
+    button.textContent = b;
+  }
 
+}
 
 api.getAllData()
   .then((result) => {
@@ -55,16 +63,19 @@
     profileData.setUserInfo(userData);
 
     const editProfilePopup = new PopupWithForm('.popup_edit-profile', { submitHandler: (userData) => {
+      Loading(true, 'Сохранение');
       api.saveEditedInfo(userData)
+
         .then((userData) => {
           profileData.setUserInfo(userData);
           editProfilePopup.close();
         })
+
         .catch((err) => {
           console.log(err);
         })
         .finally(() => {
-          renderLoading(false, editForm, 'Сохранить');
+          Loading(true, 'Сохранить');
         });
 
     }});
@@ -99,7 +110,7 @@
     });
 
     addCardPopup.setEventListeners();
-    
+
     //фулл картинки в карточке
     const showCardPopup = new PopupWithImage('.popup_image');
 
